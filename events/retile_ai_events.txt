#########################################
#
# Retile AI Events
# Author: Gebnar
#
#########################################

namespace = retile_ai

# Flag AI countries based on their needs
country_event = {
	id = retile_ai.1
	hide_window = yes

	trigger = {
		is_ai = yes
		OR = {
			is_country_type = default
			is_country_type = awakened_marauders
			is_country_type = awakened_fallen_empire
		}
	}
	
	mean_time_to_happen = {
		days = 30
	}

	immediate = {
		remove_country_flag = retile_ai_needs_energy
		remove_country_flag = retile_ai_needs_minerals
		remove_country_flag = retile_ai_needs_food
		remove_country_flag = retile_ai_needs_alloys
		remove_country_flag = retile_ai_needs_consumer_goods
		remove_country_flag = retile_ai_needs_science
		
		if = {
			limit = {
				has_monthly_income = { resource = energy value < @retile_ai_energy_income_high }
			}
			set_country_flag = retile_ai_needs_energy
		}
		if = {
			limit = {
				has_monthly_income = { resource = minerals value < @retile_ai_minerals_income_high }
			}
			set_country_flag = retile_ai_needs_minerals
		}
		if = {
			limit = {
				has_monthly_income = { resource = food value < @retile_ai_food_income_high }
			}
			set_country_flag = retile_ai_needs_food
		}
		if = {
			limit = {
				has_monthly_income = { resource = alloys value < @retile_ai_alloys_income_high }
			}
			set_country_flag = retile_ai_needs_alloys
		}
		if = {
			limit = {
				has_monthly_income = { resource = consumer_goods value < @retile_ai_consumer_goods_income_high }
			}
			set_country_flag = retile_ai_needs_consumer_goods
		}
		if = {
			limit = {
				has_monthly_income = { resource = energy value > @retile_ai_energy_income_low }
				has_monthly_income = { resource = minerals value > @retile_ai_minerals_income_low }
				has_monthly_income = { resource = food value > @retile_ai_food_income_low }
				has_monthly_income = { resource = alloys value > @retile_ai_alloys_income_low }
				has_monthly_income = { resource = consumer_goods value > @retile_ai_consumer_goods_income_low }
			}
			set_country_flag = retile_ai_needs_science
		}
	}
}

# Flag AI planets for specific kinds of urban development
country_event = {
	id = retile_ai.100
	hide_window = yes

	trigger = {
		always = no
	#	is_ai = yes
	#	OR = {
	#		is_country_type = default
	#		is_country_type = awakened_marauders
	#		is_country_type = awakened_fallen_empire
	#	}
	}
	
	mean_time_to_happen = {
		months = 12
	}

	immediate = {
	}
}


# Scrub resource buildings if the planet has no jobs of the appropriate type



# slow down AI colonizer build
ship_event = {
	id = retile_ai.1000
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			is_ship_class = shipclass_colonizer
			is_ship_class = shipclass_sponsored_colonizer
		}
	}

	immediate = {
		owner = { set_timed_country_flag = { flag = colony_ship_built days = 720 } }
	}
}

